LZR.HTML5.loadJs([LZR.HTML5.jsPath+"util/Layer.js",LZR.HTML5.jsPath+"HTML5/Bp/AirqMg/RegStat2.js"]);LZR.HTML5.Bp.AirqMg.RegStat2.OlLayer=function(a){var b=LZR.Util.ValCtrl;LZR.Util.Layer.call(this);this.layer=null;this.num=new b;this.timeId=new b(0);this.area=new b;this.mapProjection=this.dataProjection="EPSG:4326";this.event={flushed:new LZR.Util.CallBacks(this)};this.callback();a&&LZR.setObj(this,a)};LZR.HTML5.Bp.AirqMg.RegStat2.OlLayer.prototype=LZR.createPrototype(LZR.Util.Layer.prototype);
LZR.HTML5.Bp.AirqMg.RegStat2.OlLayer.prototype._super=LZR.Util.Layer.prototype;LZR.HTML5.Bp.AirqMg.RegStat2.OlLayer.prototype.className="LZR.HTML5.Bp.AirqMg.RegStat2.OlLayer";LZR.HTML5.Bp.AirqMg.RegStat2.OlLayer.prototype.version="0.0.2";LZR.HTML5.Bp.AirqMg.RegStat2.OlLayer.prototype.init=function(a){this.layer||(this.layer=new ol.layer.Image({visible:this.visible.val,opacity:this.alpha.val}),a.addLayer(this.layer));this.dataProj=ol.proj.get(this.dataProjection);this.mapProj=ol.proj.get(this.mapProjection)};
LZR.HTML5.Bp.AirqMg.RegStat2.OlLayer.prototype.flush=function(){if(this.visible.val&&0<this.alpha.val&&this.layer){var a=this.info.val[this.timeId.val];if(a){this.sourceCre(a.ret);return}}this.flushed()};LZR.HTML5.Bp.AirqMg.RegStat2.OlLayer.prototype.sourceCre=function(a){a=new ol.source.ImageStatic({url:a,imageExtent:ol.proj.transformExtent(this.area.val,this.dataProj,this.mapProj)});a.on("imageloadend",this.flushed,this);a.on("imageloaderror",this.flushed,this);this.layer.setSource(a)};
LZR.HTML5.Bp.AirqMg.RegStat2.OlLayer.prototype.flushed=function(){return this.event.flushed.execute(this)};LZR.HTML5.Bp.AirqMg.RegStat2.OlLayer.prototype.callback=function(){this.timeId.setEventObj(this);this.timeId.event.change.append(this.flush);this.info.setEventObj(this);this.info.event.set.append(this.flush);this.alpha.setEventObj(this);this.alpha.event.change.append(this.changeAlpha);this.visible.setEventObj(this);this.visible.event.change.append(this.changeVisible)};
LZR.HTML5.Bp.AirqMg.RegStat2.OlLayer.prototype.changeAlpha=function(a){this.layer&&this.layer.setOpacity(a)};LZR.HTML5.Bp.AirqMg.RegStat2.OlLayer.prototype.changeVisible=function(a){this.layer&&this.layer.setVisible(a)};
