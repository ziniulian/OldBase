LZR.HTML5.loadJs([LZR.HTML5.jsPath+"HTML5/util/Util.js"]);LZR.HTML5.Util.JsonTree=function(a){this.root=this.buildRoot(a,this);this.sid=0;this.div=this.root.view.div;this.buildOnclick();this.buildOndblclick();this.css()};LZR.HTML5.Util.JsonTree.prototype.className="LZR.HTML5.Util.JsonTree";LZR.HTML5.Util.JsonTree.prototype.version="0.0.0";LZR.HTML5.Util.JsonTree.prototype.css=function(){};
LZR.HTML5.Util.JsonTree.prototype.parseEvent=function(a){a=window.event||a;for(a=a.srcElement||a.target;!a.jsonTreeData;)a=a.parentNode||a.parentElement;return a.jsonTreeData};LZR.HTML5.Util.JsonTree.prototype.buildOnclick=function(){this.div.onclick=function(a){if(a=LZR.HTML5.Util.JsonTree.prototype.parseEvent(a))LZR.HTML5.Util.JsonTree.prototype.temp=a,a.se(),a.tree.onclick(a,event)}};
LZR.HTML5.Util.JsonTree.prototype.buildOndblclick=function(){this.div.ondblclick=function(a){var b=LZR.HTML5.Util.JsonTree.prototype.temp;b.tree.ondblclick(b,a)}};LZR.HTML5.Util.JsonTree.prototype.onclick=function(){};LZR.HTML5.Util.JsonTree.prototype.ondblclick=function(){};LZR.HTML5.Util.JsonTree.prototype.buildRoot=function(a,b){return new LZR.HTML5.Util.JsonTree.Node(a,b)};
LZR.HTML5.Util.JsonTree.Node=function(a,b){this.data=a;this.isExpand=!1;this.view=this.buildView();b&&(b.tree?(this.father=b,this.tree=b.tree):this.tree=b);this.setName()};LZR.HTML5.Util.JsonTree.Node.prototype.className="LZR.HTML5.Util.JsonTree.Node";LZR.HTML5.Util.JsonTree.Node.prototype.expand=function(){if(!this.isExpand){var a=this.data.children;if(a){for(var b=0;b<a.length;b++){var c=this.buildChild(a[b],this);this.view.addChild(c.view.div)}this.isExpand=!0}}};
LZR.HTML5.Util.JsonTree.Node.prototype.shrink=function(){this.isExpand&&(this.view.removeSub(),this.isExpand=!1)};LZR.HTML5.Util.JsonTree.Node.prototype.se=function(){this.isExpand?this.shrink():this.expand()};LZR.HTML5.Util.JsonTree.Node.prototype.setName=function(a){a&&(this.data.name=a);this.data.name?(a=this.data.name,this.data.children&&(this.data.children.length?a+="---("+this.data.children.length+")":LZR.HTML5.Util.del(this.data.children)),this.view.setName(a)):this.expand()};
LZR.HTML5.Util.JsonTree.Node.prototype.addNode=function(a){this.data.children||(this.data.children=[]);this.data.children.push(a);this.setName();this.isExpand?(a=this.buildChild(a,this),this.view.addChild(a.view.div)):this.expand()};LZR.HTML5.Util.JsonTree.Node.prototype.del=function(){for(var a=this.father.data.children,b=0;b<a.length;b++)if(this.data==a[b]){a.splice(b,1);break}this.father.setName();this.father.view.delChild(this.view.div)};LZR.HTML5.Util.JsonTree.Node.prototype.buildView=function(){return new LZR.HTML5.Util.JsonTree.View(this)};
LZR.HTML5.Util.JsonTree.Node.prototype.buildChild=function(a,b){return new LZR.HTML5.Util.JsonTree.Node(a,b)};LZR.HTML5.Util.JsonTree.View=function(a){this.div=document.createElement("div");this.nameDiv=document.createElement("div");this.subDiv=document.createElement("div");this.div.jsonTreeData=a;this.css()};LZR.HTML5.Util.JsonTree.View.prototype.className="LZR.HTML5.Util.JsonTree.View";LZR.HTML5.Util.JsonTree.View.prototype.css=function(){this.div.appendChild(this.nameDiv);this.div.appendChild(this.subDiv)};
LZR.HTML5.Util.JsonTree.View.prototype.addChild=function(a){this.subDiv.appendChild(a)};LZR.HTML5.Util.JsonTree.View.prototype.delChild=function(a){LZR.HTML5.Util.del(a.jsonTreeData);this.subDiv.removeChild(a)};LZR.HTML5.Util.JsonTree.View.prototype.removeSub=function(){for(var a=this.subDiv.firstChild;a;)LZR.HTML5.Util.del(a),this.subDiv.removeChild(a),a=this.subDiv.firstChild};LZR.HTML5.Util.JsonTree.View.prototype.setName=function(a){a&&(this.nameDiv.innerHTML=a,this.subDiv.style.margin="0 0 0 20px")};
