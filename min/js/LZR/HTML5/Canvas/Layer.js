LZR.HTML5.loadJs([LZR.HTML5.jsPath+"util/Graphics.js"]);LZR.HTML5.Canvas.Layer=function(a){this.name=a?a.name:"";this.obj=a&&a.obj?a.obj:null;this.alpha=1;this.visible=!0};LZR.HTML5.Canvas.Layer.prototype.className="LZR.HTML5.Canvas.Layer";LZR.HTML5.Canvas.Layer.prototype.version="0.0.2";LZR.HTML5.Canvas.Layer.prototype.getType=function(){switch(LZR.HTML5.Util.getClassName(this.obj)){case "HTMLImageElement":return 0;case "ImageData":return 1;default:return-1}};
LZR.HTML5.Canvas.Layer.prototype.draw=function(a,b,c,f,d,e,i,j,h){if(this.visible&&this.obj)switch(this.getType()){case 0:a.globalAlpha=this.alpha;isNaN(f)?a.drawImage(this.obj,b,c):isNaN(e)?a.drawImage(this.obj,b,c,f,d):this.draw2canvas(a,this.obj,b,c,f,d,e,i,j,h);break;case 1:a.putImageData(this.obj,e-b,i-c,b,c,f,d)}};
LZR.HTML5.Canvas.Layer.prototype.draw2canvas=function(a,b,c,f,d,e,i,j,h,k){if(!(c>b.width||i>a.canvas.width||f>b.height||j>a.canvas.height)){var g,p=h/d,q=k/e;g=-c;var l=-f,m=c+d-b.width,n=f+e-b.height;0<g&&(c=0,d-=g,g*=p,i+=g,h-=g);0<m&&(d-=m,h-=m*p);0<l&&(f=0,e-=l,g=l*q,j+=g,k-=g);0<n&&(e-=n,k-=n*q);a.drawImage(b,c,f,d,e,i,j,h,k)}};
