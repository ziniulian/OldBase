var sys=require("sys"),http=require("http"),url=require("url"),path=require("path"),fs=require("fs");
function loadStaticFile(c,a){var b=path.join(process.cwd(),c);path.exists(b,function(c){c?fs.readFile(b,"binary",function(b,c){b?(a.writeHeader(500,{"Content-Type":"text/plain;charset=utf-8"}),a.write(b+"\n","utf-8")):(a.writeHeader(200,{"Access-Control-Allow-Origin":"*","Content-Type":"text/html; charset=utf-8"}),a.write(c,"binary"));a.end()}):(a.writeHeader(404,{"Content-Type":"text/plain;charset=utf-8"}),a.write("404 \u9875\u9762\u4e0d\u5b58\u5728\n","utf-8"),a.end())})}
http.createServer(function(c,a){var b=decodeURIComponent(url.parse(c.url).pathname);0===b.indexOf("/js/")&&(b="/demo"+b);loadStaticFile(b,a)}).listen(8085);sys.puts("Server running at http://localhost:8085/");
