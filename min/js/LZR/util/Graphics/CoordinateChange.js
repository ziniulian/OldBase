LZR.HTML5.loadJs([LZR.HTML5.jsPath+"util/Graphics.js"]);LZR.Util.Graphics.CoordinateChange=function(b){this.dataSource=b;this.seven={x:0,y:0,z:0,s:1,angleZ:0,angleX:0,angleY:0};this.r={a1:0,a2:0,a3:0,b1:0,b2:0,b3:0,c1:0,c2:0,c3:0};b.scale&&(this.seven.s=b.scale)};LZR.Util.Graphics.CoordinateChange.prototype.className="LZR.Util.Graphics.CoordinateChange";LZR.Util.Graphics.CoordinateChange.prototype.version="0.0.1";
LZR.Util.Graphics.CoordinateChange.prototype.computeR4=function(){var b=this.dataSource.s.p1.x,g=this.dataSource.s.p1.y,c=this.dataSource.s.p1.z,a=this.dataSource.s.p2.x-b,i=this.dataSource.s.p2.y-g,j=this.dataSource.s.p2.z-c,m=this.dataSource.s.p3.x-b,n=this.dataSource.s.p4.x-b,d=(this.dataSource.s.p3.y-g)*a-m*i,k=(this.dataSource.s.p4.y-g)*a-n*i,h=(this.dataSource.s.p3.z-c)*a-m*j,p=(this.dataSource.s.p4.z-c)*a-n*j,e,l,f,b=this.dataSource.t.p1.x;f=this.dataSource.t.p2.x-b;e=(this.dataSource.t.p3.x-
b)*a-m*f;l=(this.dataSource.t.p4.x-b)*a-n*f;this.r.a3=(d*l-k*e)/(d*p-k*h);this.r.a2=(e-h*this.r.a3)/d;this.r.a1=(f-i*this.r.a2-j*this.r.a3)/a;g=this.dataSource.t.p1.y;f=this.dataSource.t.p2.y-g;e=(this.dataSource.t.p3.y-g)*a-m*f;l=(this.dataSource.t.p4.y-g)*a-n*f;this.r.b3=(d*l-k*e)/(d*p-k*h);this.r.b2=(e-h*this.r.b3)/d;this.r.b1=(f-i*this.r.b2-j*this.r.b3)/a;c=this.dataSource.t.p1.z;f=this.dataSource.t.p2.z-c;e=(this.dataSource.t.p3.z-c)*a-m*f;l=(this.dataSource.t.p4.z-c)*a-n*f;this.r.c3=(d*l-k*
e)/(d*p-k*h);this.r.c2=(e-h*this.r.c3)/d;this.r.c1=(f-i*this.r.c2-j*this.r.c3)/a;d=this.dataSource.s.p1.x;h=this.dataSource.s.p1.y;e=this.dataSource.s.p1.z;this.seven.x=b-(this.r.a1*d+this.r.a2*h+this.r.a3*e);this.seven.y=g-(this.r.b1*d+this.r.b2*h+this.r.b3*e);this.seven.z=c-(this.r.c1*d+this.r.c2*h+this.r.c3*e)};
LZR.Util.Graphics.CoordinateChange.prototype.trans=function(b,g){var c,a=b.x,i=b.y,j=b.z;c=g?g:{x:0,y:0,z:0};c.x=this.seven.x+(this.r.a1*a+this.r.a2*i+this.r.a3*j);c.y=this.seven.y+(this.r.b1*a+this.r.b2*i+this.r.b3*j);c.z=this.seven.z+(this.r.c1*a+this.r.c2*i+this.r.c3*j);return c};
