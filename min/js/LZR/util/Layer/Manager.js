LZR.HTML5.loadJs([LZR.HTML5.jsPath+"util/Layer.js"]);LZR.Util.Layer.Manager=function(a){this.autoEvent=this.enableEvent=!0;this.layers=[];this.event={create:new LZR.Util.CallBacks(this),append:new LZR.Util.CallBacks(this),"delete":new LZR.Util.CallBacks(this),replace:new LZR.Util.CallBacks(this)};a&&LZR.setObj(this,a)};LZR.Util.Layer.Manager.prototype.className="LZR.Util.Layer.Manager";LZR.Util.Layer.Manager.prototype.version="0.0.0";
LZR.Util.Layer.Manager.prototype.createLayers=function(a){var b=this.enableEvent,c=this.autoEvent;this.autoEvent=this.enableEvent=!1;this.layers=[];for(var d=0;d<a.length;d++){var e=a[d],f=LZR.Util.Layer;e.cls&&(f=eval(e.cls));this.append(new f(a[d]))}this.enableEvent=b;this.autoEvent=c;this.trigger("create")};LZR.Util.Layer.Manager.prototype.append=function(a){a.index=this.layers.length;this.layers.push(a);this.trigger("append")};
LZR.Util.Layer.Manager.prototype["delete"]=function(a){if(a<this.layers.length){for(this.layers.splice(a,1);a<this.layers.length;a++)this.layers[a].index--;this.trigger("delete")}};LZR.Util.Layer.Manager.prototype.replace=function(a,b){var c=this.layers[a];c&&(0>b?b=0:b>=this.layers.length&&(b=this.layers.length-1),c!==b&&(this.layers[a]=this.layers[b],this.layers[b]=c,this.trigger("replace")))};LZR.Util.Layer.Manager.prototype.flush=function(){for(var a=0;a<this.layers.length;a++)this.layers[a].flush()};
LZR.Util.Layer.Manager.prototype.setEventObj=function(a){for(var b in this.event)this.event[b].obj=a};LZR.Util.Layer.Manager.prototype.trigger=function(a){if(this.enableEvent)switch(a){case "create":this.onCreate(this.layers);break;case "append":this.onAppend(this.layers);break;case "delete":this.onDelete(this.layers);break;case "replace":this.onReplace(this.layers)}else this.autoEvent&&(this.enableEvent=!0)};LZR.Util.Layer.Manager.prototype.onCreate=function(a){return this.event.create.execute(a)};
LZR.Util.Layer.Manager.prototype.onAppend=function(a){return this.event.append.execute(a)};LZR.Util.Layer.Manager.prototype.onDelete=function(a){return this.event["delete"].execute(a)};LZR.Util.Layer.Manager.prototype.onReplace=function(a){return this.event.replace.execute(a)};
