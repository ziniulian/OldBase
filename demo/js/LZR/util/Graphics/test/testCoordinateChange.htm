<html>
	<head>
		<title>testCoordinateChange</title>
		<script src="../../../LZR.js"></script>
		<script>
			// 坐标旋转测试
 			function init() {
				LZR.HTML5.jsPath = LZR.HTML5.upPath(3);
				LZR.HTML5.loadJs([ LZR.HTML5.jsPath + "util/Graphics/CoordinateChange.js" ]);

/*
 				var ccc = new CoordinateChange({
					s: {		// 原坐标系
						p1: {x:0, y:0, z:0},
						p2: {x:1, y:0, z:0},
						p3: {x:0, y:1, z:0},
						p4: {x:0, y:0, z:-1}
					},

					t: {		// 当前坐标系
						p1: {x:10, y:0, z:10},
						p2: {x:10.7071067811865, y:0, z:9.29289321881345},
						p3: {x:10, y:1, z:10},
						p4: {x:9.29289321881345, y:0, z:9.29289321881345}
					},

					// t: {		// 当前坐标系
					// 	p1: {x:10, y:10, z:0},
					// 	p2: {x:10.5, y:9.5, z:-0.707106781186547},
					// 	p3: {x:9.5, y:10.5, z:-0.707106781186547},
					// 	p4: {x:9.29289321881345, y:9.29289321881345, z:0}
					// },

					// t: {		// 当前坐标系
					// 	p1: {x:0, y:10, z:10},
					// 	p2: {x:1, y:10, z:10},
					// 	p3: {x:0, y:10.7071067811865, z:9.29289321881345},
					// 	p4: {x:0, y:9.29289321881345, z:9.29289321881345}
					// },

					// t: {		// 当前坐标系
					// 	p1: {x:10, y:10, z:10},
					// 	p2: {x:10.7886751345948, y:9.78867513459481, z:9.42264973081037},
					// 	p3: {x:9.78867513459481, y:10.7886751345948, z:9.42264973081037},
					// 	p4: {x:9.42264973081037, y:9.42264973081037, z:9.42264973081037}
					// },

					// t: {		// 当前坐标系
					// 	p1: {x:-30, y:100, z:40},
					// 	p2: {x:-29.0530280927743, y:100.176760309247, z:40.2683281572999},
					// 	p3: {x:-29.8232396907522, y:100.410798969174, z:39.105572809},
					// 	p4: {x:-29.7316718427, y:99.105572809, z:39.6422291236}
					// },

					scale: 1	// 缩放比例
				});
				ccc.ms = {x:1, y:1, z:0},	// 测试点M 的原坐标
				ccc.ns = {x:0, y:-1, z:1},	// 测试点N 的原坐标
*/

				var ccc = new LZR.Util.Graphics.CoordinateChange({

					// s: {		// 原坐标系
					// 	p3: {x:0, y:0, z:0},
					// 	n: {x:1, y:0, z:0},
					// 	p2: {x:0, y:1, z:0},
					// 	m: {x:0, y:0, z:-1},
					// 	p1: {x:1, y:1, z:0},
					// 	p4: {x:0, y:-1, z:1}
					// },
					// t: {		// 当前坐标系
					// 	p3: {x:10, y:0, z:10},
					// 	n: {x:10.7071067811865, y:0, z:9.29289321881345},
					// 	p2: {x:10, y:1, z:10},
					// 	m: {x:9.29289321881345, y:0, z:9.29289321881345},
					// 	p1: {x:10.7071067811865, y:1, z:9.29289321881345},
					// 	p4: {x:10.70710678118655, y:-1, z:10.70710678118655}
					// },

					s: {		// 原坐标系
						m: {x:0, y:0, z:0},
						p2: {x:1, y:0, z:0},
						p3: {x:0, y:1, z:0},
						p4: {x:0, y:0, z:-1},
						n: {x:1, y:1, z:0},
						p1: {x:0, y:-1, z:1}
					},
					t: {		// 当前坐标系
						m: {x:-30, y:100, z:40},
						p2: {x:-29.0530280927743, y:100.176760309247, z:40.2683281572999},
						p3: {x:-29.8232396907522, y:100.410798969174, z:39.105572809},
						p4: {x:-29.7316718427, y:99.105572809, z:39.6422291236},
						n: {x:-28.8762677835266, y:100.587559278421, z:39.3739009663},
						p1: {x:-30.4450884665476, y:100.483628221825, z:41.2521980673998}
					},

					scale: 1	// 缩放比例
				});
				ccc.ms = ccc.dataSource.s.m;	// 测试点M 的原坐标
				ccc.ns = ccc.dataSource.s.n;	// 测试点N 的原坐标

				ccc.computeR4 ();
				ccc.m = ccc.trans(ccc.ms);		//计算测试点M 的新坐标
				ccc.n = ccc.trans(ccc.ns);		//计算测试点N 的新坐标

				document.getElementById('log').innerText =
					"X : " + ccc.seven.x + "\n" +
					"Y : " + ccc.seven.y + "\n" +
					"Z : " + ccc.seven.z + "\n" +
					"R : " + "\n" +
					"a1=" + ccc.r.a1 + "   ,   a2=" + ccc.r.a2 + "   ,   a3=" + ccc.r.a3 + "\n" +
					"b1=" + ccc.r.b1 + "   ,   b2=" + ccc.r.b2 + "   ,   b3=" + ccc.r.b3 + "\n" +
					"c1=" + ccc.r.c1 + "   ,   c2=" + ccc.r.c2 + "   ,   c3=" + ccc.r.c3 + "\n" +
					"m=" + ccc.m.x + "   ,   " + ccc.m.y + "   ,   " + ccc.m.z + "\n" +
					"n=" + ccc.n.x + "   ,   " + ccc.n.y + "   ,   " + ccc.n.z + "\n";

 			}
		</script>
	</head>

	<body onload="init()">
		<pre id="log"></pre>
	</body>
</html>
